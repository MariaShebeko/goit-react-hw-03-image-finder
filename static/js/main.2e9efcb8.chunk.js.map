{"version":3,"sources":["components/ImageGallery/ImageGallery.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/LoadMoreButton/LoadMoreButton.module.css","components/Modal/Modal.module.css","components/Loader/Loader.module.css","helpers/toastify.js","services/image-api.js","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/ImageGallery/GalleryErrorView/GalleryErrorView.js","components/Loader/Loader.js","components/LoadMoreButton/LoadMoreButton.js","components/Modal/Modal.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","toastify","message","toast","warning","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","theme","api","fetchImage","query","page","fetch","then","res","ok","json","Promise","reject","Error","Searchbar","state","imageName","handleNameChange","event","setState","currentTarget","value","toLowerCase","handleNameSubmit","preventDefault","trim","props","onSubmit","this","className","s","SearchForm","type","SearchFormButton","label","onChange","input","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","onClick","webformatURL","tags","largeImageURL","id","src","alt","srcmodal","image","ImageGallery","images","map","ImageErrorView","role","ImageLoader","Loader","color","height","width","timeout","LoadMoreButton","button","icon","modalRoot","document","querySelector","Modal","handleKeyDown","evt","code","onClose","onBackdropClick","target","window","addEventListener","removeEventListener","modalUrl","modalAlt","createPortal","overlay","modal","App","error","status","loading","showModal","renderGallery","imageAPI","data","hits","length","prevState","catch","onLoadMore","options","top","behavior","pageYOffset","documentElement","clientHeight","setTimeout","scrollTo","toggleModal","onImageClick","e","nodeName","imageModal","getAttribute","altModal","handleSearchBarSubmit","prevProps","text","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2e9efcb8.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__CQGTl\",\"text\":\"ImageGallery_text__oHavH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3vatn\",\"image\":\"ImageGalleryItem_image__1nxBg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"LoadMoreButton_button__2AeyV\",\"icon\":\"LoadMoreButton_icon__3cJSf\",\"spin\":\"LoadMoreButton_spin__3NQgN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1OpkY\",\"modal\":\"Modal_modal__1to94\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__2jWux\"};","import { toast } from 'react-toastify';\n\nconst toastify = message => {\n  return toast.warning(message, {\n    position: 'top-right',\n    autoClose: 3000,\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    theme: 'dark',\n  });\n};\n\nexport default toastify;\n","const API_KEY = '23951703-436932e17dab2edd529d032c5';\r\nconst BASE_URL = 'https://pixabay.com/api/';\r\n\r\nfunction fetchImage(query, page) {\r\n  return fetch(\r\n    `${BASE_URL}?q=${query}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\r\n  ).then(res => {\r\n    if (res.ok) {\r\n      return res.json();\r\n    }\r\n    return Promise.reject(new Error('No images with this name'));\r\n  });\r\n}\r\n\r\nconst api = {\r\n  fetchImage,\r\n};\r\n\r\nexport default api;\r\n","import React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { FaSistrix } from 'react-icons/fa';\nimport toastify from '../../helpers/toastify';\nimport s from './Searchbar.module.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass Searchbar extends Component {\n  static propTypes = {\n    onSubmit: PropTypes.func.isRequired,\n  };\n\n  state = {\n    imageName: '',\n  };\n\n  handleNameChange = event => {\n    this.setState({ imageName: event.currentTarget.value.toLowerCase() });\n  };\n\n  handleNameSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.imageName.trim() === '') {\n      toastify('Press the name of the image!');\n    }\n    this.props.onSubmit(this.state.imageName);\n    this.setState({ imageName: '' });\n  };\n\n  render() {\n    const { imageName } = this.state;\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleNameSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.label}>Search</span> <FaSistrix />\n          </button>\n          <input\n            onChange={this.handleNameChange}\n            value={imageName}\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import PropTypes from 'prop-types';\nimport s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = (\n  { webformatURL, tags, largeImageURL, id },\n  onClick,\n) => {\n  return (\n    <li className={s.ImageGalleryItem} key={`id_${id}`}>\n      <img\n        onClick={onClick}\n        id={id}\n        src={webformatURL}\n        alt={tags}\n        srcmodal={largeImageURL}\n        className={s.image}\n      />\n    </li>\n  );\n};\n\nImageGalleryItem.propTypes = {\n  id: PropTypes.string.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n  largeImageURL: PropTypes.string.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\nexport default ImageGalleryItem;\n","import ImageGalleryItem from '../ImageGalleryItem';\nimport PropTypes from 'prop-types';\nimport s from './ImageGallery.module.css';\n\nconst ImageGallery = ({ images, onClick }) => {\n  return (\n    <ul className={s.ImageGallery}>\n      {images.map(image => ImageGalleryItem(image, onClick))}\n    </ul>\n  );\n};\nexport default ImageGallery;\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(PropTypes.object),\n  onClick: PropTypes.func.isRequired,\n};\n","export default function ImageErrorView({ message }) {\n  return (\n    <div role=\"alert\">\n      <p>{message}</p>\n    </div>\n  );\n}\n","import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport s from './Loader.module.css';\n\nexport default function ImageLoader() {\n  return (\n    <div className={s.Loader}>\n      <Loader\n        type=\"Plane\"\n        color=\"#00BFFF\"\n        height={80}\n        width={80}\n        timeout={3000}\n      />\n    </div>\n  );\n}\n","import { BiLoader } from 'react-icons/bi';\nimport s from './LoadMoreButton.module.css';\n\nconst LoadMoreButton = ({ onClick }) => {\n  return (\n    <button className={s.button} type=\"button\" onClick={() => onClick()}>\n      <BiLoader className={s.icon} /> <span>Load more</span>\n    </button>\n  );\n};\n\nexport default LoadMoreButton;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\nexport default class Modal extends Component {\n  static propTypes = {\n    onClose: PropTypes.func.isRequired,\n    modalUrl: PropTypes.string.isRequired,\n    modalAlt: PropTypes.string.isRequired,\n  };\n\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = evt => {\n    if (evt.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  onBackdropClick = evt => {\n    if (evt.currentTarget === evt.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { modalUrl, modalAlt } = this.props;\n    return createPortal(\n      <div className={s.overlay} onClick={this.onBackdropClick}>\n        <div className={s.modal}>\n          <img src={modalUrl} alt={modalAlt}></img>\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import './App.css';\nimport React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport toastify from './helpers/toastify';\nimport imageAPI from './services/image-api';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport ImageErrorView from './components/ImageGallery/GalleryErrorView/GalleryErrorView';\nimport ImageLoader from './components/Loader';\nimport LoadMoreButton from './components/LoadMoreButton';\nimport Modal from './components/Modal';\nimport s from './components/ImageGallery/ImageGallery.module.css';\n\nclass App extends Component {\n  state = {\n    images: [],\n    page: 1,\n    imageName: '',\n    error: null,\n    status: 'idle',\n    loading: false,\n    showModal: false,\n    modalUrl: '',\n    modalAlt: '',\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    if (prevState.imageName !== this.state.imageName) {\n      this.setState({\n        status: 'pending',\n        page: 1,\n        images: [],\n      });\n      this.renderGallery();\n    }\n  }\n\n  renderGallery = () => {\n    const { imageName, page } = this.state;\n    imageAPI\n      .fetchImage(imageName, page)\n      .then(data => {\n        return data.hits;\n      })\n      .then(images => {\n        if (images.length === 0) {\n          toastify('Nothing found on your request!');\n        }\n        return this.setState(prevState => {\n          return {\n            images: [...prevState.images, ...images],\n            page: prevState.page + 1,\n            status: 'resolved',\n            loading: false,\n            modalUrl: images.largeImageURL,\n          };\n        });\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }));\n  };\n\n  onLoadMore = () => {\n    this.setState({ loading: true });\n    this.renderGallery();\n    const options = {\n      top: null,\n      behavior: 'smooth',\n    };\n    options.top = window.pageYOffset + document.documentElement.clientHeight;\n    setTimeout(() => {\n      window.scrollTo(options);\n    }, 1000);\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  onImageClick = e => {\n    if (e.target.nodeName !== 'IMG') {\n      return;\n    }\n    e.preventDefault();\n\n    const imageModal = e.target.getAttribute('srcmodal');\n    const altModal = e.target.getAttribute('alt');\n\n    this.setState({\n      showModal: true,\n      modalUrl: imageModal,\n      modalAlt: altModal,\n    });\n  };\n\n  handleSearchBarSubmit = imageName => {\n    this.setState({ imageName });\n  };\n\n  render() {\n    const { images, error, status, showModal, modalUrl, modalAlt } = this.state;\n\n    return (\n      <>\n        <Searchbar onSubmit={this.handleSearchBarSubmit} />\n        <ToastContainer />\n\n        {status === 'idle' && (\n          <div className={s.text}>Press the name of the image</div>\n        )}\n\n        {status === 'pending' && <ImageLoader />}\n\n        {status === 'rejected' && <ImageErrorView message={error.message} />}\n\n        {status === 'resolved' && (\n          <>\n            <ImageGallery images={images} onClick={this.onImageClick} />\n\n            {showModal && (\n              <Modal\n                onClose={this.toggleModal}\n                modalUrl={modalUrl}\n                modalAlt={modalAlt}\n              />\n            )}\n            {this.state.images.length > 11 && !this.state.loading && (\n              <LoadMoreButton onClick={this.onLoadMore} />\n            )}\n          </>\n        )}\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2PHVR\",\"SearchForm\":\"Searchbar_SearchForm__2krl6\",\"SearchFormButton\":\"Searchbar_SearchFormButton__2KlAj\",\"label\":\"Searchbar_label__2_Bmo\",\"input\":\"Searchbar_input__3bh5l\",\"SearchForm-input\":\"Searchbar_SearchForm-input__1zsdW\"};"],"sourceRoot":""}