{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/LoadMoreButton/LoadMoreButton.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/GalleryErrorView/GalleryErrorView.js","components/Loader/Loader.js","components/LoadMoreButton/LoadMoreButton.js","components/Modal/Modal.js","components/ImageGallery/ImageGallery.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","imageName","handleNameChange","event","setState","target","value","toLowerCase","handleNameSubmit","preventDefault","trim","toast","warning","position","autoClose","hideProgressBar","closeOnClick","pauseOnHover","draggable","theme","props","onSubmit","className","s","SearchForm","this","type","SearchFormButton","label","onChange","input","autoComplete","autoFocus","placeholder","Component","ImageGalleryItem","src","alt","largeImage","id","onClick","srcmodal","image","ImageErrorView","message","role","ImageLoader","Loader","color","height","width","timeout","LoadMoreButton","button","icon","modalRoot","document","querySelector","Modal","handleKeyDown","evt","code","onClose","onBackdropClick","currentTarget","window","addEventListener","removeEventListener","modalUrl","modalAlt","createPortal","overlay","modal","API_KEY","BASE_URL","ImageGallery","images","page","error","status","loading","showModal","renderGallery","fetch","then","res","ok","json","Promise","reject","Error","data","hits","console","log","prevState","largeImageURL","catch","toIncreasePage","onLoadMore","toggleModal","onImageClick","e","dir","nodeName","currentImageId","currentIndex","findIndex","imageModal","altModal","getAttribute","prevProps","text","map","webformatURL","tags","length","App","handleSearchBarSubmit","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.613f2053.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3vatn\",\"image\":\"ImageGalleryItem_image__1nxBg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"LoadMoreButton_button__2AeyV\",\"icon\":\"LoadMoreButton_icon__3cJSf\",\"spin\":\"LoadMoreButton_spin__3NQgN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__1OpkY\",\"modal\":\"Modal_modal__1to94\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__CQGTl\",\"text\":\"ImageGallery_text__oHavH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Loader\":\"Loader_Loader__2jWux\"};","import React, { Component } from 'react';\nimport { FaSistrix } from 'react-icons/fa';\nimport { toast } from 'react-toastify';\nimport s from './Searchbar.module.css';\nimport 'react-toastify/dist/ReactToastify.css';\n\nclass Searchbar extends Component {\n  state = {\n    imageName: '',\n  };\n\n  handleNameChange = event => {\n    this.setState({ imageName: event.target.value.toLowerCase() });\n  };\n\n  handleNameSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.imageName.trim() === '') {\n      return toast.warning('Press the name of the image!', {\n        position: 'top-right',\n        autoClose: 3000,\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        theme: 'dark',\n      });\n    }\n    this.props.onSubmit(this.state.imageName);\n    this.setState({ imageName: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.Searchbar}>\n        <form className={s.SearchForm} onSubmit={this.handleNameSubmit}>\n          <button type=\"submit\" className={s.SearchFormButton}>\n            <span className={s.label}>Search</span> <FaSistrix />\n          </button>\n          <input\n            onChange={this.handleNameChange}\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import s from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ src, alt, largeImage, id, onClick }) => {\n  return (\n    <li className={s.ImageGalleryItem} key={id}>\n      <img\n        id={id}\n        src={src}\n        alt={alt}\n        srcmodal={largeImage}\n        className={s.image}\n        onClick={onClick}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n","export default function ImageErrorView({ message }) {\n  return (\n    <div role=\"alert\">\n      {/* <img src=\"\" width=\"\" alt=\"\"/> */}\n      <p>{message}</p>\n    </div>\n  );\n}\n","import 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport Loader from 'react-loader-spinner';\nimport s from './Loader.module.css';\n\nexport default function ImageLoader() {\n  return (\n    <div className={s.Loader}>\n      <Loader\n        type=\"Plane\"\n        color=\"#00BFFF\"\n        height={80}\n        width={80}\n        timeout={3000}\n      />\n    </div>\n  );\n}\n","import { BiLoader } from 'react-icons/bi';\nimport s from './LoadMoreButton.module.css';\n\nconst LoadMoreButton = ({ onClick }) => {\n  return (\n    <button className={s.button} type=\"button\" onClick={() => onClick()}>\n      <BiLoader className={s.icon} /> <span>Load more</span>\n    </button>\n  );\n};\n\nexport default LoadMoreButton;\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n\n  handleKeyDown = evt => {\n    if (evt.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  onBackdropClick = evt => {\n    if (evt.currentTarget === evt.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { modalUrl, modalAlt } = this.props;\n    return createPortal(\n      <div className={s.overlay} onClick={this.onBackdropClick}>\n        <div className={s.modal}>\n          <img src={modalUrl} alt={modalAlt}></img>\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n","import { Component } from 'react';\n// import fetchImages from '../../services/imageAPI';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport ImageErrorView from './GalleryErrorView/GalleryErrorView';\nimport ImageLoader from '../Loader';\nimport LoadMoreButton from '../LoadMoreButton';\nimport Modal from '../Modal';\nimport s from './ImageGallery.module.css';\nconst API_KEY = '23951703-436932e17dab2edd529d032c5';\nconst BASE_URL = 'https://pixabay.com/api/';\nexport default class ImageGallery extends Component {\n  state = {\n    images: [],\n    page: 1,\n    error: null,\n    status: 'idle',\n    loading: false,\n    showModal: false,\n    modalUrl: '',\n    modalAlt: '',\n  };\n\n  componentDidUpdate(prevProps) {\n    if (prevProps.imageName !== this.props.imageName) {\n      this.setState({\n        status: 'pending',\n        page: 1,\n        images: [],\n      });\n      this.renderGallery();\n    }\n  }\n\n  renderGallery = () => {\n    fetch(\n      `${BASE_URL}?q=${this.props.imageName}&page=${this.state.page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n    )\n      .then(res => {\n        if (res.ok) {\n          return res.json();\n        }\n        // 404 не отображается\n        return Promise.reject(new Error('No images with this name'));\n      })\n      .then(data => {\n        return data.hits;\n      })\n      .then(images => {\n        console.log(images);\n\n        return this.setState(prevState => {\n          return {\n            images: [...prevState.images, ...images],\n            status: 'resolved',\n            loading: false,\n            modalUrl: images.largeImageURL,\n          };\n        });\n      })\n      .catch(error => this.setState({ error, status: 'rejected' }));\n    this.toIncreasePage();\n  };\n\n  toIncreasePage = () => {\n    this.setState(prevState => {\n      return { page: prevState.page + 1 };\n    });\n  };\n\n  onLoadMore = () => {\n    this.setState({ loading: true });\n    this.renderGallery();\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  onImageClick = e => {\n    const { images } = this.state;\n    console.dir(e.target);\n\n    if (e.target.nodeName !== 'IMG') {\n      return;\n    }\n    const currentImageId = +e.target.id;\n    const currentIndex = images.findIndex(image => image.id === currentImageId);\n    const imageModal = images[currentIndex].largeImageURL;\n    // const imageModal = imageModalIndex.largeImageURL;\n    const altModal = e.target.getAttribute('alt');\n    console.log('modalUrl', imageModal);\n    console.log(currentImageId);\n\n    this.setState({\n      showModal: true,\n      modalUrl: imageModal,\n      modalAlt: altModal,\n    });\n  };\n\n  render() {\n    const { images, error, status, showModal, modalUrl, modalAlt } = this.state;\n\n    if (status === 'idle') {\n      return <div className={s.text}>Press the name of the image</div>;\n    }\n\n    if (status === 'pending') {\n      return <ImageLoader />;\n    }\n\n    if (status === 'rejected') {\n      return <ImageErrorView message={error.message} />;\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <ul className={s.ImageGallery}>\n            {images &&\n              images.map(image => {\n                return (\n                  <ImageGalleryItem\n                    key={image.id}\n                    id={image.id}\n                    src={image.webformatURL}\n                    alt={image.tags}\n                    srcmodal={image.largeImageURL}\n                    onClick={this.onImageClick}\n                  />\n                );\n              })}\n          </ul>\n          {showModal && (\n            <Modal\n              onClose={this.toggleModal}\n              modalUrl={modalUrl}\n              modalAlt={modalAlt}\n            />\n          )}\n          {this.state.images.length > 0 && !this.state.loading && (\n            <LoadMoreButton onClick={this.onLoadMore} />\n          )}\n        </>\n      );\n    }\n    /* {this.state.images.length !== 0 && (\n          <LoadMoreButton onClick={this.incrementPage} />\n        )} */\n  }\n}\n","import './App.css';\nimport React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nclass App extends Component {\n  state = {\n    images: [],\n    loading: false,\n    imageName: '',\n  };\n\n  handleSearchBarSubmit = imageName => {\n    this.setState({ imageName });\n  };\n\n  render() {\n    return (\n      <>\n        <div>\n          <Searchbar onSubmit={this.handleSearchBarSubmit} />\n          <ImageGallery\n            imageName={this.state.imageName}\n            // onClick={this.onImageClick}\n          />\n          <ToastContainer />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2PHVR\",\"SearchForm\":\"Searchbar_SearchForm__2krl6\",\"SearchFormButton\":\"Searchbar_SearchFormButton__2KlAj\",\"label\":\"Searchbar_label__2_Bmo\",\"input\":\"Searchbar_input__3bh5l\",\"SearchForm-input\":\"Searchbar_SearchForm-input__1zsdW\"};"],"sourceRoot":""}